---
description: Multi-agent code review workflow orchestrating security, performance, compliance, and quality analysis
allowed-tools: [Bash, Read, Write, Edit, Task, Grep, Glob]
---

# Multi-Agent Code Review Workflow

Execute comprehensive code review using multiple specialized agents working in parallel and sequence:

## Agent Orchestration Chain:

### Parallel Analysis Phase (Agents work simultaneously):
1. **Security Analysis**: security-auditor agent analyzes multi-tenant security and vulnerabilities
2. **Performance Review**: performance-optimization-specialist agent identifies performance bottlenecks
3. **Code Quality**: backend-api-developer agent reviews code structure and patterns
4. **Compliance Check**: cpa-tax-compliance agent validates financial and regulatory compliance

### Sequential Review Phase (Agents work in order):
5. **Technical Debt**: technical-debt-planner agent prioritizes technical debt and refactoring
6. **Testing Strategy**: test-suite-developer agent designs comprehensive test coverage
7. **Documentation**: docs-writer agent generates and updates technical documentation
8. **Integration**: integration-specialist agent validates external API integrations

## Execution Plan:
```
Initiating multi-agent code review for: $ARGUMENTS

Phase 1 - Parallel Analysis:
- Security auditor analyzing multi-tenant isolation
- Performance specialist reviewing query optimization
- Backend developer examining code structure
- Compliance expert validating CPA requirements

Phase 2 - Sequential Review:
- Technical debt planner prioritizing improvements
- Test developer designing comprehensive test strategy
- Documentation writer updating technical docs
- Integration specialist validating external APIs

Phase 3 - Synthesis & Recommendations:
- Consolidating findings from all agents
- Prioritizing recommendations by impact
- Generating implementation roadmap
```

## Review Focus Areas:
- **Multi-Tenant Security**: Cross-tenant isolation, RBAC implementation, data protection
- **Performance Optimization**: Database queries, API response times, caching strategies
- **Code Quality**: Architecture patterns, maintainability, scalability
- **CPA Compliance**: Tax calculations, audit trails, regulatory requirements
- **Technical Debt**: Code complexity, outdated dependencies, architectural improvements
- **Test Coverage**: Unit tests, integration tests, CPA workflow testing
- **Documentation**: API docs, code comments, architectural decisions
- **Integration Health**: QuickBooks sync, Stripe payments, Azure AI services

## Agent Coordination Strategy:
- **Parallel Execution**: Independent analysis for comprehensive coverage
- **Sequential Processing**: Dependent tasks building on previous analysis
- **Conflict Resolution**: Automated priority scoring for conflicting recommendations
- **Consensus Building**: Cross-agent validation of critical recommendations

Let me start by orchestrating the parallel analysis phase with multiple agents.